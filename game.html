<body>
	<script src="https://dyka.netlify.app/dyka.js"></script>

	<script type="text/javascript">
		initDyka()

		var clicks = 0

		var cps = 0;
		var cps2 = 0;
		var click = 0;
		var clicking = false;

		var cookie = new Dyka.obj(game.width/2-50, game.height/2-50, 100, 100, "red")

		function loop(){
			Dyka.update(loop)

			function clicked(){
				click++;
				cps++;
				clicking = true;
			}

			function clicksPerSecond(){
				cps2 = cps;
				cps -= cps;
				console.log("Atualizado.");
			}

			function verifyClick(){
				if(cps == 0 && cps2 != cps){
					//clicking = false;
					if(click > 0){
						click = click - click;
					}
				}
				
				if(click == 0 && cps == 0){
					clicking = false;
				}
			}

			cookie.add()
			cookie.rotation += 1

			if (cookie.click()) {
				cookie.width = 120
				cookie.height = 120
				cookie.x = game.width/2-60
				cookie.y = game.height/2-60
			}else{
				cookie.width = 100
				cookie.height = 100
				cookie.x = game.width/2-50
				cookie.y = game.height/2-50
			}

			Dyka.print("Clicks: " + clicks, 10, 20, 20, "white")
			Dyka.print("Cps: " + cps, 10, 40, 20, "white")
			verifyClick();
		}
		loop()
		setInterval(function(){ if(cps > 0){ clicksPerSecond(); } }, 1000);

		document.addEventListener("click", (e)=>{
			if (cookie.hover()) {
				clicks++
			}
		})
	</script>
</body>